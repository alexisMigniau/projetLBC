{% extends "base.html.twig" %}

{% block body %}
	<script src="https://cdn.jsdelivr.net/npm/places.js@1.17.1"></script>

		<div class="card shadow mb-4 ">
			<a href="#collapseCardAjout" class="d-block card-header py-3" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="collapseCardAjout">
                <h6 class="m-0 font-weight-bold">Enregistrer une visite</h6>
            </a>

            <div class="collapse" id="collapseCardAjout">
            	<div class="card-body">
            		<form class="user" method="POST" action="{{ path('creationVisite') }}" autocomplete="off">
            			<div class="form-group row">
                            <div class="form-group col-md-3">
                                <select class="custom-select col-sm-12" id="id_praticien">
                                    <option selected value="">Sélectionner un praticien</option>
                                    {% for praticien in listePraticiens %}
                                        <option value="{{ praticien.idPraticiens }}">{{ praticien.prenom }} {{ praticien.nom }} - {{ praticien.idPraticiens }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="form-group col-md-3">
                                <select class="custom-select col-sm-12" id="matricule">
                                    <option selected value="">Sélectionner un visiteur</option>
                                    {% for visiteurRegion in listeVisiteurs %}
                                        {% set visiteur = visiteurRegion.matricule.matricule %}
                                        <option value="{{ visiteur.Id }}">{{ visiteur.prenom }} {{ visiteur.nom }} - {{ visiteur.Id }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="form-group col-md-3">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="date_visite">Date Visite</span>
                                    </div>
                                    <input type="date" class="form-control" placeholder="Date Visite" name="date_visite" aria-label="Date Visite" aria-describedby="date_visite" required>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="input-group col-md-9">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">Motif</span>
                                </div>
                                <input type="textarea" class="form-control" aria-label="Motif" name="motif" />
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="form-group col-md-3">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="convaincu">
                                    <label class="custom-control-label" for="convaincu">Convaincu</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="form-group col-md-3">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="visite_planifiee">Contrevisite</span>
                                    </div>
                                    <input type="date" class="form-control" placeholder="Contrevisite" name="contre_visite" aria-label="Contrevisite" aria-describedby="visite_planifiee">
                                </div>
                            </div>
                            <div class="form-group col-md-3">
                                <input type="submit" class="btn btn-success" value="Enregistrer une visite">
                            </div>
                        </div>
            		</form>
            	</div>
            </div>
		</div>

        <div class="card shadow mb-4">
            <a href="#collapseCardRecherche" class="d-block card-header py-3" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="collapseCardRecherche">
                <h6 class="m-0 font-weight-bold">Liste des visites</h6>
            </a>

            <div class="collapse" id="collapseCardRecherche">
                <div class="card-body">
                    <div class="input-group mb-3">
                        {% if is_granted('ROLE_RESPONSABLE') %}
                            <select class="custom-select col-sm-4" id="selectVisiteur">
                                <option selected value="">Choix d'un visiteur</option>
                                {% for visiteurRegion in listeVisiteurs %}
                                    {% set visiteur = visiteurRegion.matricule.matricule %}
                                    <option value="{{visiteur.prenom }} {{visiteur.nom }}">{{visiteur.prenom }} {{ visiteur.nom }}</option>
                                {% endfor %}
                            </select>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

{% endblock %}